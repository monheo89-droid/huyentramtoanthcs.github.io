<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vòng Quay May Mắn - Tập hợp Toán 6</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Thư viện KaTeX để hiển thị công thức toán -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" xintegrity="sha384-n8MVd4RsNIU0KOVEMVIhbCwHMAq2EVqmcEtGCTEzGHQEAs5TqjAUz0dlLDRTTnD+" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" xintegrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUbKyJjd" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" xintegrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .correct {
            background-color: #22c55e !important;
            color: white !important;
            border-color: #16a34a !important;
        }
        .incorrect {
            background-color: #ef4444 !important;
            color: white !important;
            border-color: #dc2626 !important;
        }
        .spin-btn {
            transition: transform 0.1s ease-in-out;
        }
        .spin-btn:active {
            transform: scale(0.95);
        }
        @keyframes text-flicker {
            0% { opacity: 0.1; } 20% { opacity: 1; } 40% { opacity: 0.3; } 60% { opacity: 1; } 80% { opacity: 0.2; } 100% { opacity: 1; }
        }
        .flickering {
            animation: text-flicker 0.5s linear infinite;
        }
        .katex { font-size: 1.2em !important; }
        .answer-buttons .katex { font-size: 1.1em !important; }
        #explanation-area {
            text-align: left;
            line-height: 1.6;
        }
    </style>
</head>
<body class="bg-slate-100 flex items-center justify-center min-h-screen p-4">

    <div id="game-container" class="w-full max-w-2xl bg-white rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 transition-all duration-300">
        <h1 class="text-2xl md:text-3xl font-bold text-slate-800 text-center mb-2">Vòng Quay May Mắn</h1>
        <p class="text-center text-slate-500 mb-6">Bài 1: Tập hợp, Phần tử của tập hợp - Toán 6</p>
        
        <div class="flex justify-between items-center bg-slate-50 p-3 rounded-lg mb-6">
            <p class="text-slate-600 font-semibold">Số câu đã trả lời: <span id="answered-count">0/10</span></p>
            <p class="text-slate-600 font-semibold">Điểm: <span id="score-count">0</span></p>
        </div>

        <div id="main-area" class="text-center min-h-[300px] flex flex-col justify-center items-center">
            
            <div id="question-display" class="w-full hidden">
                <h2 id="question" class="text-lg sm:text-xl font-semibold text-slate-700 mb-6 min-h-[56px] flex items-center justify-center px-2"></h2>
                <div id="answer-buttons" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
                <div id="explanation-area" class="hidden mt-6 p-4 bg-slate-50 border-t-4 border-blue-500 rounded-b-lg"></div>
            </div>

            <button id="spin-btn" class="spin-btn w-40 h-40 sm:w-48 sm:h-48 bg-blue-600 text-white font-extrabold text-3xl sm:text-4xl rounded-full shadow-lg hover:bg-blue-700 transition-all duration-300 flex items-center justify-center">QUAY</button>
        </div>

        <div id="result-area" class="hidden text-center">
             <h2 class="text-2xl font-bold text-slate-800 mb-4">Hoàn thành!</h2>
             <p id="final-score-text" class="text-lg text-slate-600 mb-6"></p>
             <button id="restart-btn" class="w-full md:w-auto bg-blue-600 text-white font-semibold py-3 px-8 rounded-lg hover:bg-blue-700 transition-colors duration-300">Chơi lại</button>
        </div>

    </div>

    <script>
        const allQuestions = [
            {
                question: "Viết tập hợp A các số tự nhiên lớn hơn 5 và nhỏ hơn 10.",
                answers: [
                    { text: "A = {6; 7; 8; 9}", correct: true },
                    { text: "A = {5; 6; 7; 8; 9}", correct: false },
                    { text: "A = {6; 7; 8}", correct: false },
                    { text: "A = {6; 7; 8; 9; 10}", correct: false }
                ],
                explanation: "<b>Lời giải:</b> Các số tự nhiên lớn hơn 5 là 6, 7, 8, 9, ... và nhỏ hơn 10 là ..., 9, 8, 7. Vậy các số tự nhiên thỏa mãn điều kiện là 6, 7, 8, 9. Ta viết tập hợp A = {6; 7; 8; 9}."
            },
            {
                question: "Cho tập hợp M = {a, b, c, x, y}. Khẳng định nào sau đây là <b>SAI</b>?",
                answers: [
                    { text: "\\(a \\in M\\)", correct: false },
                    { text: "\\(d \\notin M\\)", correct: false },
                    { text: "\\(c \\notin M\\)", correct: true },
                    { text: "\\(x \\in M\\)", correct: false }
                ],
                explanation: "<b>Lời giải:</b> Ký hiệu \\(\\in\\) đọc là 'là phần tử của', ký hiệu \\(\\notin\\) đọc là 'không phải là phần tử của'. Nhìn vào tập hợp M, ta thấy 'c' là một phần tử của M. Do đó, khẳng định \\(c \\notin M\\) (c không phải là phần tử của M) là một khẳng định sai."
            },
            {
                question: "Tập hợp các chữ cái trong từ 'HỌC SINH' là:",
                answers: [
                    { text: "{H, O, C, S, I, N, H}", correct: false },
                    { text: "{H, O, C, S, I, N}", correct: true },
                    { text: "{H, Ọ, C, S, I, N}", correct: false },
                    { text: "{h, o, c, s, i, n}", correct: false }
                ],
                explanation: "<b>Lời giải:</b> Khi viết một tập hợp các chữ cái, mỗi chữ cái chỉ được liệt kê một lần, không phân biệt chữ hoa hay thường và không tính dấu. Các chữ cái khác nhau trong từ 'HỌC SINH' là H, O, C, S, I, N. Vậy tập hợp cần tìm là {H, O, C, S, I, N}."
            },
            {
                question: "Cho tập hợp B = {\\(x \\in \\mathbb{N} \\) | \\(15 \\le x < 20\\)}. Viết tập hợp B bằng cách liệt kê các phần tử.",
                answers: [
                    { text: "B = {16; 17; 18; 19}", correct: false },
                    { text: "B = {15; 16; 17; 18; 19; 20}", correct: false },
                    { text: "B = {15; 16; 17; 18; 19}", correct: true },
                    { text: "B = {15; 16; 17; 18}", correct: false }
                ],
                explanation: "<b>Lời giải:</b> Tập hợp B gồm các số tự nhiên \\(x\\) (vì \\(x \\in \\mathbb{N}\\)) thỏa mãn điều kiện \\(15 \\le x < 20\\). Điều này có nghĩa là \\(x\\) lớn hơn hoặc bằng 15 và nhỏ hơn 20. Các số đó là: 15, 16, 17, 18, 19."
            },
            {
                question: "Số phần tử của tập hợp P = {\\(x \\in \\mathbb{N}^* \\) | \\(x \\le 7\\)} là:",
                answers: [
                    { text: "8", correct: false },
                    { text: "7", correct: true },
                    { text: "6", correct: false },
                    { text: "Vô số", correct: false }
                ],
                explanation: "<b>Lời giải:</b> \\(\\mathbb{N}^*\\) là tập hợp các số tự nhiên khác 0. Tập hợp P gồm các số tự nhiên khác 0 và nhỏ hơn hoặc bằng 7. Vậy P = {1; 2; 3; 4; 5; 6; 7}. Đếm các phần tử, ta thấy tập hợp P có 7 phần tử."
            },
            {
                question: "Cách viết nào sau đây là đúng để biểu diễn một tập hợp?",
                answers: [
                    { text: "A = (0; 1; 2; 3)", correct: false },
                    { text: "A = [0; 1; 2; 3]", correct: false },
                    { text: "A = 0; 1; 2; 3", correct: false },
                    { text: "A = {0; 1; 2; 3}", correct: true }
                ],
                explanation: "<b>Lời giải:</b> Theo quy ước, để viết một tập hợp bằng cách liệt kê các phần tử, ta viết các phần tử trong hai dấu ngoặc nhọn { }, các phần tử được ngăn cách bởi dấu chấm phẩy (hoặc dấu phẩy). Do đó, cách viết A = {0; 1; 2; 3} là đúng."
            },
            {
                question: "Cho A là tập hợp các tháng (dương lịch) có 31 ngày trong một năm. Tháng nào sau đây <b>KHÔNG</b> thuộc tập hợp A?",
                answers: [
                    { text: "Tháng 1", correct: false },
                    { text: "Tháng 9", correct: true },
                    { text: "Tháng 7", correct: false },
                    { text: "Tháng 12", correct: false }
                ],
                explanation: "<b>Lời giải:</b> Các tháng có 31 ngày là: Tháng 1, 3, 5, 7, 8, 10, 12. Tháng 9 chỉ có 30 ngày. Do đó, Tháng 9 không thuộc tập hợp A."
            },
            {
                question: "Ký hiệu của tập hợp các số tự nhiên khác 0 là gì?",
                answers: [
                    { text: "\\(\\mathbb{N}\\)", correct: false },
                    { text: "\\(\\mathbb{Z}\\)", correct: false },
                    { text: "\\(\\mathbb{N}^*\\)", correct: true },
                    { text: "\\(\\mathbb{Q}\\)", correct: false }
                ],
                explanation: "<b>Lời giải:</b> Tập hợp các số tự nhiên (0, 1, 2, ...) được ký hiệu là \\(\\mathbb{N}\\). Tập hợp các số tự nhiên khác 0 (1, 2, 3, ...) được ký hiệu là \\(\\mathbb{N}^*\\)."
            },
            {
                question: "Tập hợp E gồm các số tự nhiên chẵn nhỏ hơn 15. Phần tử lớn nhất thuộc E là số nào?",
                answers: [
                    { text: "15", correct: false },
                    { text: "14", correct: true },
                    { text: "13", correct: false },
                    { text: "16", correct: false }
                ],
                explanation: "<b>Lời giải:</b> Các số tự nhiên chẵn nhỏ hơn 15 là: 0, 2, 4, 6, 8, 10, 12, 14. Trong các số này, phần tử lớn nhất là 14."
            },
            {
                question: "Tập hợp các số tự nhiên không vượt quá 5 là:",
                answers: [
                    { text: "A = {1; 2; 3; 4; 5}", correct: false },
                    { text: "A = {0; 1; 2; 3; 4}", correct: false },
                    { text: "A = {0; 1; 2; 3; 4; 5}", correct: true },
                    { text: "A = {1; 2; 3; 4}", correct: false }
                ],
                explanation: "<b>Lời giải:</b> Cụm từ 'không vượt quá 5' có nghĩa là 'nhỏ hơn hoặc bằng 5' (\\(\\le 5\\)). Tập hợp các số tự nhiên không vượt quá 5 bao gồm số 0 và các số tự nhiên nhỏ hơn hoặc bằng 5. Vậy A = {0; 1; 2; 3; 4; 5}."
            }
        ];

        const questionElement = document.getElementById('question');
        const answerButtons = document.getElementById('answer-buttons');
        const explanationArea = document.getElementById('explanation-area');
        const spinButton = document.getElementById('spin-btn');
        const questionDisplay = document.getElementById('question-display');
        const resultArea = document.getElementById('result-area');
        const finalScoreText = document.getElementById('final-score-text');
        const restartButton = document.getElementById('restart-btn');
        const answeredCountEl = document.getElementById('answered-count');
        const scoreCountEl = document.getElementById('score-count');
        const mainArea = document.getElementById('main-area');

        let remainingQuestions = [];
        let score = 0;
        let answeredQuestions = 0;
        const totalQuestions = allQuestions.length;
        let currentQuestionObject = null;

        function renderMath() {
            if (window.renderMathInElement) {
                renderMathInElement(document.body, {
                    delimiters: [ {left: '$$', right: '$$', display: true}, {left: '\\[', right: '\\]', display: true}, {left: '$', right: '$', display: false}, {left: '\\(', right: '\\)', display: false} ]
                });
            }
        }

        function startGame() {
            score = 0;
            answeredQuestions = 0;
            remainingQuestions = [...allQuestions].sort(() => 0.5 - Math.random());
            
            updateProgress();
            resultArea.classList.add('hidden');
            mainArea.classList.remove('hidden');
            questionDisplay.classList.add('hidden');
            spinButton.classList.remove('hidden');
            spinButton.disabled = false;
            spinButton.innerText = "QUAY";
        }

        function updateProgress() {
            answeredCountEl.innerText = `${answeredQuestions}/${totalQuestions}`;
            scoreCountEl.innerText = score;
        }

        function spinAndShowQuestion() {
            if (remainingQuestions.length === 0) {
                showFinalScore();
                return;
            }
            spinButton.disabled = true;
            spinButton.classList.add('hidden');
            questionDisplay.classList.remove('hidden');
            explanationArea.classList.add('hidden');
            questionElement.classList.add('flickering');
            questionElement.innerText = "Đang chọn câu hỏi...";
            
            setTimeout(() => {
                currentQuestionObject = remainingQuestions.pop();
                questionElement.classList.remove('flickering');
                displayQuestion(currentQuestionObject);
            }, 1500);
        }

        function displayQuestion(question) {
            resetState();
            questionElement.innerHTML = question.question;
            question.answers.forEach(answer => {
                const button = document.createElement("button");
                button.innerHTML = answer.text;
                button.classList.add('w-full', 'text-left', 'p-3', 'sm:p-4', 'border-2', 'rounded-lg', 'transition-all', 'duration-200', 'hover:bg-slate-100', 'hover:border-blue-500', 'focus:outline-none', 'focus:ring-2', 'focus:ring-blue-500');
                answerButtons.appendChild(button);
                if (answer.correct) {
                    button.dataset.correct = "true";
                }
                button.addEventListener("click", selectAnswer);
            });
            renderMath();
        }

        function resetState() {
            while (answerButtons.firstChild) {
                answerButtons.removeChild(answerButtons.firstChild);
            }
        }

        function selectAnswer(e) {
            const selectedBtn = e.currentTarget;
            const isCorrect = selectedBtn.dataset.correct === "true";
            
            if (isCorrect) {
                selectedBtn.classList.add("correct");
                score++;
            } else {
                selectedBtn.classList.add("incorrect");
            }
            answeredQuestions++;
            updateProgress();

            Array.from(answerButtons.children).forEach(button => {
                if (button.dataset.correct === "true") {
                    button.classList.add("correct");
                }
                button.disabled = true;
            });
            
            explanationArea.innerHTML = currentQuestionObject.explanation;
            explanationArea.classList.remove('hidden');
            renderMath();

            spinButton.innerText = remainingQuestions.length > 0 ? "QUAY TIẾP" : "XEM KẾT QUẢ";
            spinButton.classList.remove('hidden');
            spinButton.disabled = false;
        }

        function showFinalScore() {
            mainArea.classList.add('hidden');
            resultArea.classList.remove('hidden');
            finalScoreText.innerText = `Bạn đã trả lời đúng ${score}/${totalQuestions} câu hỏi.`;
        }
        
        spinButton.addEventListener("click", () => {
             if (answeredQuestions === totalQuestions) {
                showFinalScore();
             } else {
                questionDisplay.classList.add('hidden');
                spinAndShowQuestion();
             }
        });

        restartButton.addEventListener("click", startGame);

        document.addEventListener('DOMContentLoaded', startGame);
    </script>
</body>
</html>
